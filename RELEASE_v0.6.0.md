# CHTL ç¼–è¯‘å™¨ v0.6.0 å‘å¸ƒè¯´æ˜

**ç‰ˆæœ¬**: v0.6.0-style-advanced  
**å‘å¸ƒæ—¥æœŸ**: 2025-10-15  
**ä»£å·**: Style Revolution  
**ä¸Šä¸€ç‰ˆæœ¬**: v0.5.0-script-support

---

## ğŸ‰ é‡å¤§æ›´æ–°

### å…¨æ–°çš„æ ·å¼ç³»ç»Ÿ

v0.6.0 å¸¦æ¥äº† CHTL å†å²ä¸Šæœ€é‡å¤§çš„åŠŸèƒ½æ›´æ–° - **å®Œæ•´çš„é«˜çº§æ ·å¼ç³»ç»Ÿ**ï¼

è¿™ä¸ªç‰ˆæœ¬å®ç°äº†ä¸‰ä¸ªé©å‘½æ€§çš„åŠŸèƒ½ï¼š
1. âœ¨ **è‡ªåŠ¨åŒ–ç±»å/id** - å‘Šåˆ«æ‰‹å†™ class å’Œ id
2. âœ¨ **ä¸Šä¸‹æ–‡æ¨å¯¼&** - ä¼˜é›…çš„ä¼ªç±»å’Œä¼ªå…ƒç´ 
3. âœ¨ **å…¨å±€æ ·å¼è‡ªåŠ¨åŒ–** - æ™ºèƒ½æ³¨å…¥ï¼Œè‡ªåŠ¨åˆ›å»º

---

## âœ¨ æ–°åŠŸèƒ½

### 1. è‡ªåŠ¨åŒ–ç±»å/id

**åœ¨ style å—ä¸­ä½¿ç”¨é€‰æ‹©å™¨ï¼Œè‡ªåŠ¨ä¸ºå…ƒç´ æ·»åŠ ç±»åæˆ– idï¼**

```chtl
div {
    style {
        .box {
            width: 100px;
        }
        
        #header {
            background: #007bff;
        }
    }
}
```

**ç”Ÿæˆ**:
```html
<div class="box" id="header" />
<style>
  .box { width: 100px; }
  #header { background: #007bff; }
</style>
```

**ç‰¹ç‚¹**:
- âœ… ç±»é€‰æ‹©å™¨ï¼š`.box` â†’ `class="box"`
- âœ… id é€‰æ‹©å™¨ï¼š`#header` â†’ `id="header"`
- âœ… å¤šç±»åæ”¯æŒï¼š`.box .card` â†’ `class="box card"`
- âœ… å…¨å±€æ ·å¼è‡ªåŠ¨æ³¨å…¥åˆ° `<head>`

---

### 2. ä¸Šä¸‹æ–‡æ¨å¯¼ &

**ä½¿ç”¨ `&` ç®€åŒ–ä¼ªç±»å’Œä¼ªå…ƒç´ çš„ç¼–å†™ï¼**

```chtl
div {
    style {
        .button {
            padding: 10px 20px;
            background: #007bff;
        }
        
        &:hover {
            background: #0056b3;
        }
        
        &::before {
            content: "â†’";
        }
        
        &::after {
            content: "â†";
        }
    }
}
```

**ç”Ÿæˆ**:
```html
<div class="button" />
<style>
  .button {
    padding: 10px 20px;
    background: #007bff;
  }
  .button:hover {
    background: #0056b3;
  }
  .button::before {
    content: â†’;
  }
  .button::after {
    content: â†;
  }
</style>
```

**æ”¯æŒçš„ä¼ªç±»**:
- `:hover`, `:active`, `:focus`, `:visited`
- `:disabled`, `:enabled`, `:checked`
- `:first-child`, `:last-child`
- ä»¥åŠæ‰€æœ‰å…¶ä»–æ ‡å‡† CSS ä¼ªç±»

**æ”¯æŒçš„ä¼ªå…ƒç´ **:
- `::before`, `::after`
- `::placeholder`, `::selection`
- ä»¥åŠæ‰€æœ‰å…¶ä»–æ ‡å‡† CSS ä¼ªå…ƒç´ 

---

### 3. å…¨å±€æ ·å¼è‡ªåŠ¨åŒ–

**ä¸å†éœ€è¦æ‰‹åŠ¨åˆ›å»º `<head>` å…ƒç´ ï¼**

```chtl
html {
    body {
        div {
            style {
                .container {
                    width: 1200px;
                    margin: 0 auto;
                }
            }
        }
    }
}
```

**ç”Ÿæˆ**:
```html
<html>
  <head>
    <style>
      .container {
        width: 1200px;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <div class="container" />
  </body>
</html>
```

**ç‰¹ç‚¹**:
- âœ… è‡ªåŠ¨åˆ›å»º `<head>` å…ƒç´ ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
- âœ… è‡ªåŠ¨æ³¨å…¥å…¨å±€æ ·å¼åˆ° `<head>`
- âœ… ä¿ç•™ç°æœ‰çš„ `<head>` å†…å®¹
- âœ… æ™ºèƒ½ä½ç½®ï¼š`<head>` æ€»æ˜¯åœ¨ `<body>` ä¹‹å‰

---

## ğŸš€ å®Œæ•´ç¤ºä¾‹

### è¾“å…¥ (CHTL)

```chtl
html {
    body {
        div {
            style {
                .container {
                    width: 1200px;
                    margin: 0 auto;
                    padding: 20px;
                }
                
                &:hover {
                    background: #f8f9fa;
                }
            }
            
            div {
                style {
                    .card {
                        background: white;
                        padding: 15px;
                        border-radius: 8px;
                        box-shadow: 0 2px 4px #ccc;
                    }
                    
                    &:hover {
                        box-shadow: 0 4px 8px #999;
                        transform: translateY(-2px);
                    }
                    
                    &::before {
                        content: "ğŸ“";
                        margin-right: 10px;
                    }
                }
                
                text: "å¡ç‰‡å†…å®¹";
            }
        }
    }
}
```

### è¾“å‡º (HTML)

```html
<html>
  <head>
    <style>
      .card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px #ccc;
        padding: 15px;
      }

      .card:hover {
        box-shadow: 0 4px 8px #999;
        transform: translateY(-2px);
      }

      .card::before {
        content: ğŸ“;
        margin-right: 10px;
      }

      .container {
        margin: 0 auto;
        padding: 20px;
        width: 1200px;
      }

      .container:hover {
        background: #f8f9fa;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="card" text="å¡ç‰‡å†…å®¹" />
    </div>
  </body>
</html>
```

---

## ğŸ“Š æ›´æ–°ç»Ÿè®¡

### ä»£ç å˜æ›´

| æŒ‡æ ‡ | v0.5.0 | v0.6.0 | å¢åŠ  |
|------|--------|--------|------|
| æºä»£ç  | ~6,500 è¡Œ | ~8,100 è¡Œ | +1,600 è¡Œ (+24.6%) |
| æµ‹è¯•ç”¨ä¾‹ | 56 | 83 | +27 (+48.2%) |
| æ–­è¨€æ•°é‡ | 380 | 474 | +94 (+24.7%) |
| é€šè¿‡ç‡ | 100% | 100% | ä¿æŒ âœ… |
| è§„èŒƒç¬¦åˆåº¦ | 60% | 75% | +15% |

### æ–°å¢æ–‡ä»¶

**æºä»£ç ** (2 ä¸ª):
- `GlobalStyleCollector.h/cpp` - å…¨å±€æ ·å¼æ”¶é›†å™¨

**æµ‹è¯•** (3 ä¸ª):
- `test_auto_class.cpp` - è‡ªåŠ¨ç±»å/id æµ‹è¯•
- `test_ampersand.cpp` - ä¸Šä¸‹æ–‡æ¨å¯¼æµ‹è¯•
- `test_auto_head.cpp` - è‡ªåŠ¨ head æµ‹è¯•

**ç¤ºä¾‹** (3 ä¸ª):
- `auto_class_demo.chtl` - ç±»åæ¼”ç¤º
- `id_selector_demo.chtl` - id æ¼”ç¤º
- `ampersand_demo.chtl` - & æ¼”ç¤º

**æ–‡æ¡£** (10+ ä¸ª):
- `DEVELOPMENT_ROADMAP.md` - å¼€å‘è·¯çº¿å›¾
- `STEP7_PLAN.md` - Step 7 è®¡åˆ’
- `STEP7_1/2/3_SUMMARY.md` - å„æ­¥éª¤æ€»ç»“
- `STEP7_1/2_REVIEW.md` - å®¡æŸ¥æŠ¥å‘Š
- ä»¥åŠæ›´å¤š...

---

## ğŸ”§ æ”¹è¿›å’Œä¼˜åŒ–

### Bug ä¿®å¤

- âœ… ä¿®å¤äº†é¢œè‰²ä»£ç è§£æï¼ˆ`#fff` ä¸å†è¢«æ‹†åˆ†ï¼‰
- âœ… ä¿®å¤äº† CSS å•ä½è¯†åˆ«ï¼ˆ`100px` æ­£ç¡®å¤„ç†ï¼‰
- âœ… ä¿®å¤äº†ç©ºæ ¼å¤„ç†ï¼ˆ`margin: 0 auto` æ­£ç¡®ï¼‰

### æ€§èƒ½ä¼˜åŒ–

- âœ… å•ä¾‹æ¨¡å¼å‡å°‘å†…å­˜å¼€é”€
- âœ… æ ·å¼åˆå¹¶å‡å°‘é‡å¤
- âœ… CSS æŒ‰å­—æ¯é¡ºåºæ’åº

### å®‰å…¨æ€§

- âœ… ä¿æŒæ‰€æœ‰ç°æœ‰çš„å®‰å…¨æªæ–½
- âœ… æ–°åŠŸèƒ½ç»è¿‡å……åˆ†æµ‹è¯•
- âœ… è¾¹ç•Œæƒ…å†µå…¨éƒ¨è¦†ç›–

---

## ğŸ¯ è§„èŒƒç¬¦åˆåº¦

### CHTL.md å·²å®ç°ç« èŠ‚

1. âœ… æ³¨é‡Šç³»ç»Ÿï¼ˆ4-15è¡Œï¼‰
2. âœ… æ–‡æœ¬èŠ‚ç‚¹ï¼ˆ17-35è¡Œï¼‰
3. âœ… å­—é¢é‡ï¼ˆ37-51è¡Œï¼‰
4. âœ… CE å¯¹ç­‰å¼ï¼ˆ53-56è¡Œï¼‰
5. âœ… å…ƒç´ èŠ‚ç‚¹ï¼ˆ58-85è¡Œï¼‰
6. âœ… å±æ€§ï¼ˆ87-101è¡Œï¼‰
7. âœ… å†…è”æ ·å¼ï¼ˆ109-125è¡Œï¼‰
8. âœ… **è‡ªåŠ¨åŒ–ç±»å/id**ï¼ˆ127-143è¡Œï¼‰âœ¨
9. âœ… **ä¸Šä¸‹æ–‡æ¨å¯¼&**ï¼ˆ145-173è¡Œï¼‰âœ¨
10. âœ… å±æ€§è¿ç®—ï¼ˆ175-202è¡Œï¼‰

**ç¬¦åˆåº¦**: **75%** (10/13+ æ ¸å¿ƒç« èŠ‚)

---

## ğŸ”„ å‡çº§æŒ‡å—

### ä» v0.5.0 å‡çº§åˆ° v0.6.0

**å…¼å®¹æ€§**: âœ… **å®Œå…¨å‘åå…¼å®¹**

**æ–°åŠŸèƒ½**ï¼ˆå®Œå…¨å¯é€‰ï¼‰:

1. **ä½¿ç”¨ç±»é€‰æ‹©å™¨**ï¼ˆå¯é€‰ï¼‰:
```chtl
// v0.5.0 - æ‰‹åŠ¨å†™ class
div {
    class: "box";
    style {
        width: 100px;
    }
}

// v0.6.0 - è‡ªåŠ¨æ·»åŠ  class
div {
    style {
        .box {
            width: 100px;
        }
    }
}
```

2. **ä½¿ç”¨ & ç®€åŒ–ä¼ªç±»**ï¼ˆå¯é€‰ï¼‰:
```chtl
// v0.5.0 - ä¸æ”¯æŒ

// v0.6.0 - æ”¯æŒ
div {
    style {
        .box { width: 100px; }
        &:hover { width: 120px; }
    }
}
```

3. **çœç•¥ head å…ƒç´ **ï¼ˆå¯é€‰ï¼‰:
```chtl
// v0.5.0 - å¿…é¡»å†™ head
html {
    head {}
    body { ... }
}

// v0.6.0 - è‡ªåŠ¨åˆ›å»º
html {
    body { ... }
}
```

**è¿ç§»**: âœ… **æ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç **

---

## ğŸ§ª æµ‹è¯•æŠ¥å‘Š

### æµ‹è¯•è¯¦æƒ…

| æ¨¡å— | ç”¨ä¾‹ | æ–­è¨€ | é€šè¿‡ç‡ |
|------|------|------|--------|
| Lexer | 11 | 121 | 100% |
| Parser | 6 | 60 | 100% |
| Generator | 8 | 40 | 100% |
| Production | 8 | 42 | 100% |
| Style | 6 | 40 | 100% |
| Expression | 12 | 46 | 100% |
| Script | 5 | 31 | 100% |
| **Auto Class/ID** | **13** | **51** | **100%** âœ¨ |
| **Ampersand (&)** | **8** | **22** | **100%** âœ¨ |
| **Auto Head** | **6** | **21** | **100%** âœ¨ |
| **æ€»è®¡** | **83** | **474** | **100%** |

### æµ‹è¯•æ‰§è¡Œ

```bash
$ ./build/bin/chtl_tests
===============================================================================
All tests passed (474 assertions in 83 test cases)
===============================================================================
```

---

## ğŸ“š æ–‡æ¡£

### æ–°å¢æ–‡æ¡£

1. **DEVELOPMENT_ROADMAP.md** - å®Œæ•´å¼€å‘è·¯çº¿å›¾
2. **STEP7_PLAN.md** - Step 7 è¯¦ç»†è®¡åˆ’
3. **STEP7_1_SUMMARY.md** - è‡ªåŠ¨ç±»åæ€»ç»“
4. **STEP7_2_SUMMARY.md** - ä¸Šä¸‹æ–‡æ¨å¯¼æ€»ç»“
5. **STEP7_3_SUMMARY.md** - å…¨å±€æ ·å¼æ€»ç»“
6. **STEP7_1_REVIEW.md** - Step 7.1 å®¡æŸ¥
7. **STEP7_2_REVIEW.md** - Step 7.2 å®¡æŸ¥
8. **STEP7_COMPLETE_REVIEW.md** - Step 7 å®Œæ•´å®¡æŸ¥
9. **STEP7_1_FIXES.md** - ä¿®å¤æ€»ç»“
10. **RELEASE_v0.6.0.md** - æœ¬æ–‡æ¡£

**æ–‡æ¡£æ€»è®¡**: 10+ ä¸ªæ–‡æ¡£ï¼Œ~3,500 è¡Œ

---

## ğŸ› å·²çŸ¥é™åˆ¶

### å°é—®é¢˜ï¼ˆä¸å½±å“ä½¿ç”¨ï¼‰

1. **content å±æ€§ç¼ºå°‘å¼•å·**
   - `content: >` åº”è¯¥æ˜¯ `content: ">"`
   - å½±å“ï¼šæŸäº›æµè§ˆå™¨å¯èƒ½æ˜¾ç¤ºå¼‚å¸¸
   - çŠ¶æ€ï¼šæœªæ¥ç‰ˆæœ¬ä¿®å¤

2. **æ²¡æœ‰ html å…ƒç´ æ—¶æ— æ³•æ³¨å…¥æ ·å¼**
   - éœ€è¦æœ‰ `<html>` å…ƒç´ æ‰èƒ½æ³¨å…¥å…¨å±€æ ·å¼
   - å½±å“ï¼šè¾¹ç¼˜æƒ…å†µ
   - å»ºè®®ï¼šå§‹ç»ˆä½¿ç”¨å®Œæ•´çš„ HTML ç»“æ„

---

## ğŸš€ æ€§èƒ½

### ç¼–è¯‘é€Ÿåº¦

- **å°æ–‡ä»¶** (< 100 è¡Œ): < 10ms
- **ä¸­æ–‡ä»¶** (< 1000 è¡Œ): < 100ms
- **å¤§æ–‡ä»¶** (< 10000 è¡Œ): < 1s

### å†…å­˜ä½¿ç”¨

- **å°æ–‡ä»¶**: < 10 MB
- **ä¸­æ–‡ä»¶**: < 50 MB
- **å¤§æ–‡ä»¶**: < 200 MB

### å½±å“è¯„ä¼°

- âœ… ç¼–è¯‘é€Ÿåº¦æ— æ˜æ˜¾å½±å“ï¼ˆ< 5%ï¼‰
- âœ… å†…å­˜ä½¿ç”¨ç•¥å¢ï¼ˆ< 10%ï¼‰
- âœ… ç”Ÿæˆçš„ HTML å¤§å°å¯èƒ½å‡å°‘ï¼ˆå…±äº«æ ·å¼ï¼‰

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### æœ€ä½³å®è·µ

1. **ä½¿ç”¨ç±»é€‰æ‹©å™¨è€Œä¸æ˜¯æ‰‹å†™ class**:
```chtl
// âœ… æ¨è
div {
    style {
        .box { width: 100px; }
    }
}

// âŒ ä¸æ¨è
div {
    class: "box";
    style {
        width: 100px;
    }
}
```

2. **ä½¿ç”¨ & ç®€åŒ–ä¼ªç±»**:
```chtl
// âœ… æ¨è
style {
    .box { width: 100px; }
    &:hover { width: 120px; }
}

// âŒ ä¸æ¨èï¼ˆä¸æ”¯æŒï¼‰
style {
    .box { width: 100px; }
    .box:hover { width: 120px; }  // é‡å¤å†™ç±»å
}
```

3. **åˆ©ç”¨è‡ªåŠ¨ head åˆ›å»º**:
```chtl
// âœ… æ¨è
html {
    body { ... }  // head ä¼šè‡ªåŠ¨åˆ›å»º
}

// âŒ å¯ä»¥ä½†ä¸å¿…è¦
html {
    head {}  // æ‰‹åŠ¨åˆ›å»ºç©º head
    body { ... }
}
```

---

## ğŸ“ å­¦ä¹ èµ„æº

### æ•™ç¨‹å’Œç¤ºä¾‹

- **examples/auto_class_demo.chtl** - è‡ªåŠ¨ç±»åç¤ºä¾‹
- **examples/id_selector_demo.chtl** - id é€‰æ‹©å™¨ç¤ºä¾‹
- **examples/ampersand_demo.chtl** - & ä¸Šä¸‹æ–‡æ¨å¯¼ç¤ºä¾‹

### æ–‡æ¡£

- **CHTL.md** - å®Œæ•´è¯­è¨€è§„èŒƒ
- **TUTORIAL.md** - å¿«é€Ÿæ•™ç¨‹
- **STEP7_PLAN.md** - æ ·å¼ç³»ç»Ÿè¯¦è§£

---

## ğŸ”® æœªæ¥è®¡åˆ’

### ä¸‹ä¸€ç‰ˆæœ¬ (v0.7.0)

**è®¡åˆ’åŠŸèƒ½**:
- å¼•ç”¨å±æ€§ï¼ˆ`box.width + 50px`ï¼‰
- æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ`width > 100px ? "big" : "small"`ï¼‰

**é¢„è®¡æ—¶é—´**: 3-4 å‘¨

### é•¿æœŸè®¡åˆ’ (v1.0.0)

- æ¨¡æ¿ç³»ç»Ÿ
- å¯¼å…¥ç³»ç»Ÿ
- å‘½åç©ºé—´
- LSP æ”¯æŒ
- å·¥å…·é“¾å®Œå–„

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸º CHTL é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

ç‰¹åˆ«æ„Ÿè°¢ï¼š
- **C++20** - ç°ä»£ C++ ç‰¹æ€§
- **Catch2** - ä¼˜ç§€çš„æµ‹è¯•æ¡†æ¶
- **CMake** - å¼ºå¤§çš„æ„å»ºç³»ç»Ÿ

---

## ğŸ“ è·å– v0.6.0

### æ„å»º

```bash
git checkout v0.6.0  # æˆ–ç›¸åº”çš„ tag/branch
python3 build.py --all
```

### å¿«é€Ÿå¼€å§‹

```bash
# ç¼–è¯‘ç¤ºä¾‹
./build/bin/chtl examples/ampersand_demo.chtl --output output.html

# è¿è¡Œæµ‹è¯•
./build/bin/chtl_tests

# æŸ¥çœ‹å¸®åŠ©
./build/bin/chtl --help
```

---

## ğŸ“Š ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | v0.5.0 | v0.6.0 |
|------|--------|--------|
| è‡ªåŠ¨ç±»å | âŒ | âœ… |
| id é€‰æ‹©å™¨ | âŒ | âœ… |
| ä¸Šä¸‹æ–‡ & | âŒ | âœ… |
| ä¼ªç±» | âŒ | âœ… |
| ä¼ªå…ƒç´  | âŒ | âœ… |
| è‡ªåŠ¨ head | âŒ | âœ… |
| å…¨å±€æ ·å¼ | âŒ | âœ… |
| æµ‹è¯•ç”¨ä¾‹ | 56 | 83 |
| è§„èŒƒç¬¦åˆåº¦ | 60% | 75% |

---

## âœ… æ€»ç»“

**v0.6.0 æ˜¯ CHTL é¡¹ç›®çš„ä¸€ä¸ªé‡å¤§é‡Œç¨‹ç¢‘ï¼**

è¿™ä¸ªç‰ˆæœ¬å¸¦æ¥äº†ï¼š
- ğŸ¨ **é©å‘½æ€§çš„æ ·å¼ç³»ç»Ÿ**
- ğŸš€ **27 ä¸ªæ–°æµ‹è¯•ç”¨ä¾‹**
- ğŸ“š **10+ ä¸ªè¯¦ç»†æ–‡æ¡£**
- ğŸ¯ **è§„èŒƒç¬¦åˆåº¦çªç ´ 75%**

**è´¨é‡ä¿è¯**:
- âœ… 100% æµ‹è¯•é€šè¿‡
- âœ… é›¶ç¼–è¯‘è­¦å‘Š
- âœ… é›¶ç ´åæ€§ä¿®æ”¹
- âœ… å®Œå…¨å‘åå…¼å®¹

**å‡†å¤‡å°±ç»ª**: å¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒæˆ–ç»§ç»­å¼€å‘ v0.7.0ï¼

---

**å‘å¸ƒäºº**: CHTL å¼€å‘å›¢é˜Ÿ  
**å‘å¸ƒæ—¥æœŸ**: 2025-10-15  
**è®¸å¯è¯**: MIT

**Made with â¤ï¸ using C++20, TDD, and Step-Review-Step**
