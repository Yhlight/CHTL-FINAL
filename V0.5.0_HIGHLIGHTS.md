# 🎉 CHTL v0.5.0 功能亮点

**版本**: v0.5.0-script-support  
**发布日期**: 2025-10-14  
**主题**: 交互式应用支持

---

## ⭐ 最大亮点：脚本块支持！

v0.5.0 引入了完整的 **script {} 块**支持，让 CHTL 可以创建真正的交互式应用！

### 之前（v0.4.0）

只能创建静态页面：

```chtl
button {
    style {
        padding: 10px 20px;
    }
    
    text: "Click Me";
}
```

### 现在（v0.5.0）

可以添加交互逻辑！⭐

```chtl
button {
    style {
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
    }
    
    script {
        this.addEventListener("click", function() {
            alert("Hello CHTL!");
        });
    }
    
    text: "Click Me";
}
```

---

## 🎯 三大核心改进

### 1. 脚本块支持 ⭐

**功能**:
- ✅ 完整的 JavaScript 代码嵌入
- ✅ 事件监听器
- ✅ DOM 操作
- ✅ 支持嵌套花括号
- ✅ 可与 style {} 结合

**示例 - 计数器**:
```chtl
div {
    div {
        id: "counter";
        text: "Count: 0";
    }
    
    button {
        script {
            var count = 0;
            this.addEventListener("click", function() {
                count++;
                document.getElementById("counter").textContent = "Count: " + count;
            });
        }
        
        text: "Increment";
    }
}
```

---

### 2. 颜色代码修复 ⭐

**之前**:
```html
style="color: # 3498 db"  ❌
```

**现在**:
```html
style="color: #3498db"  ✅
```

支持所有 hex 颜色：
- `#fff` (3位)
- `#3498db` (6位)
- `#ff000080` (8位，带透明度)

---

### 3. CSS 空格优化 ⭐

**之前**:
```html
style="margin: 0auto; padding: 10px20px"  ❌
```

**现在**:
```html
style="margin: 0 auto; padding: 10px 20px"  ✅
```

智能识别：
- ✅ CSS 单位：`100px`, `50em`, `80%`
- ✅ 多值属性：`0 auto`, `10px 20px 30px`
- ✅ 复合值：`1px solid #ccc`

---

## 💡 实战示例

### 简单 TODO 应用

查看 `examples/simple_todo.chtl`：

**功能**:
- ✅ 添加待办事项
- ✅ 清空列表
- ✅ 动态更新
- ✅ 完整的交互

**编译运行**:
```bash
./build/bin/chtl examples/simple_todo.chtl --doctype --output todo.html
open todo.html  # 在浏览器中打开，立即可用！
```

---

### 脚本演示页面

查看 `examples/script_demo.chtl`：

**包含**:
- ✅ 按钮点击事件
- ✅ 计数器
- ✅ 文本输入交互
- ✅ 页面初始化脚本

**运行**:
```bash
./build/bin/chtl examples/script_demo.chtl --doctype
```

---

## 📊 测试统计

### 新增测试

- **test_script.cpp**
  - 5 个测试用例
  - 31 个断言
  - 100% 通过

### 总体统计

| 指标 | v0.4.0 | v0.5.0 | 增长 |
|------|--------|--------|------|
| 测试用例 | 51 | **56** | +10% |
| 断言数量 | 349 | **380** | +9% |
| 通过率 | 100% | **100%** | - |

---

## 🎯 CHTL.md 规范符合度

| 章节 | 功能 | v0.4.0 | v0.5.0 |
|------|------|--------|--------|
| 4-15 | 注释系统 | ✅ | ✅ |
| 17-35 | 文本节点 | ✅ | ✅ |
| 37-51 | 字面量 | ✅ | ✅ |
| 53-56 | CE 对等式 | ✅ | ✅ |
| 58-85 | 元素节点 | ✅ | ✅ |
| 87-101 | 属性 | ✅ | ✅ |
| 109-125 | 内联样式 | ✅ | ✅ |
| 175-202 | 属性运算 | ✅ | ✅ |
| - | **脚本块** | ❌ | **✅** ⭐ |

**总体符合度**: 85% → **90%**

---

## 🚀 立即开始

### 第一步：更新到 v0.5.0

```bash
git pull origin main
python3 build.py --all
```

### 第二步：尝试新功能

```bash
# 查看脚本演示
./build/bin/chtl examples/script_demo.chtl

# 构建 TODO 应用
./build/bin/chtl examples/simple_todo.chtl --doctype --output todo.html
open todo.html
```

### 第三步：运行测试

```bash
python3 build.py --test
# ✅ All tests passed (380 assertions in 56 test cases)
```

---

## 📖 更多信息

- **发布说明**: `RELEASE_v0.5.0.md`
- **快速教程**: `TUTORIAL.md` (已更新)
- **示例集合**: `EXAMPLES.md` (已更新)
- **完整规范**: `CHTL.md`

---

## 🙏 感谢

感谢你对 CHTL 项目的支持！

v0.5.0 让 CHTL 编译器功能更加完整和强大！

---

**版本**: v0.5.0-script-support  
**日期**: 2025-10-14  
**下一版本**: v0.6.0 (规划中)

**Made with ❤️ using C++20, CMake, and TDD**

