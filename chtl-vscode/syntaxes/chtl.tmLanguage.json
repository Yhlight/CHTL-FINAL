{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "CHTL",
  "scopeName": "source.chtl",
  "patterns": [
    { "include": "#comments" },
    { "include": "#keywords" },
    { "include": "#strings" },
    { "include": "#tags_and_properties" },
    { "include": "#operators" },
    { "include": "#chtl_js_specific" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-slash.chtl",
          "match": "//.*"
        },
        {
          "name": "comment.line.hash.chtl",
          "match": "#\\s.*"
        },
        {
          "name": "comment.block.chtl",
          "begin": "/\\*",
          "end": "\\*/",
          "name": "comment.block.documentation.chtl"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.block.chtl",
          "match": "(\\[(Template|Custom|Origin|Import|Namespace|Configuration|Info|Export|Name|OriginType)\\])"
        },
        {
          "name": "keyword.control.at-rule.chtl",
          "match": "\\b(@(Style|Element|Var|Html|JavaScript|Chtl|CJmod|Config))\\b"
        },
        {
          "name": "keyword.other.chtl",
          "match": "\\b(inherit|delete|insert|after|before|replace|at top|at bottom|from|as|except|use|html5|text|style|script|ScriptMain|ScriptLoader|Listen|Delegate|Animate|Vir|Router)\\b"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.chtl",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.chtl",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "string.quoted.single.chtl",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "constant.character.escape.chtl",
              "match": "\\\\."
            }
          ]
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.chtl",
          "match": "(\\->|&->|\\+|\\-|\\*|/|%|\\*\\*|\\?|:|&&|\\|\\||>|<|=)"
        }
      ]
    },
    "chtl_js_specific": {
        "patterns": [
            {
                "name": "meta.embedded.block.chtljs",
                "begin": "\\{\\{",
                "end": "\\}\\}",
                "patterns": [
                    {
                        "include": "source.js"
                    }
                ]
            },
            {
                "name": "variable.other.responsive.chtl",
                "begin": "\\$",
                "end": "\\$",
                "patterns": [
                    {
                        "match": "[a-zA-Z_][a-zA-Z0-9_]*"
                    }
                ]
            }
        ]
    },
    "tags_and_properties": {
        "patterns": [
            {
              "match": "\\b([a-zA-Z\\-]+)\\s*(:|\\=)",
              "captures": {
                "1": { "name": "support.type.property-name.css.chtl" },
                "2": { "name": "keyword.operator.assignment.chtl" }
              }
            },
            {
              "name": "entity.name.tag.chtl",
              "match": "^\\s*([a-zA-Z0-9_:-]+)"
            }
        ]
    }
  }
}
